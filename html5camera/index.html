<!DOCTYPE html>
<html>
  <head>
    <title>HTML 5 Camera test</title>

    <script type="text/javascript">
      function hasGetUserMedia() {
        return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
      }
      if (hasGetUserMedia()) {
        console.log('getUserMedia() is supported by your browser');
      } else{
        console.log('getUserMedia() is not supported by your browser');
      }

    </script>
  </head>
  <body>
    <video id="video" width="640" height="480" autoplay></video>
    <button id="snap">Snap a photo!</button>
    <canvas id="canvas" width="640" height="480"></canvas>
    <img src="" id="image" width="640" height="480" />
    <script>
      const vgaConstraints = {
        video: {
          width: {
            min: 640
          },
          height: {
            min: 480
          }
        }
      };

      const hdConstraints = {
        video: {
          width: {
            min: 1280
          },
          height: {
            min: 720
          }
        },
      };

      const constraints = vgaConstraints;

      // const video = document.querySelector('video');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');
      const video = document.getElementById('video');

      navigator.mediaDevices.getUserMedia(constraints).then(stream => {
        video.srcObject = stream;
        video.play();
      });

      const button = document.getElementById('snap');
      button.addEventListener('click', () => {
        const width = constraints.video.width.min;
        const height = constraints.video.height.min;
        context.drawImage(video, 0, 0, width, height);
      });

    </script>
  </body>
</html>